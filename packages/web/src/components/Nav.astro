---
import { Image } from "astro:assets";
import { Button } from "@/components/ui/button";
import MobileNav from "@/components/react/navigation/navigation-mobile-nav";
import NavAvatar from "@/components/react/navigation/navigation-avatar-popover";

export interface Props {
  title?: string;
}

const session = await Astro.locals.auth.validate();
---

<div
  class="flex h-16 w-screen items-center justify-between bg-white text-black"
>
  <div class="container mx-auto flex items-center justify-between">
    <a href="/">
      <div>
        <Image src="/logo.svg" alt="temp logo" width="32" height="32" />
      </div>
    </a>
    <div class="md:hidden">
      <MobileNav
        username={session ? session.user.username : undefined}
        client:load
      />
    </div>
    <div class="hidden items-center gap-x-2 md:flex">
      {session && <NavAvatar client:load />}
      {
        !session && (
          <Button variant="link">
            <a href="/auth/login">Login</a>
          </Button>
        )
      }
      {
        !session && (
          <a href="/auth/register">
            <div>
              <Button id="login">
                Register
                <span>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="28"
                    height="32"
                    viewBox="0 0 512 512"
                  >
                    <path
                      d="M322.2 349.7c-3.1-3.1-3-8 0-11.3l66.4-74.4H104c-4.4 0-8-3.6-8-8s3.6-8 8-8h284.6l-66.3-74.4c-2.9-3.4-3.2-8.1-.1-11.2 3.1-3.1 8.5-3.3 11.4-.1 0 0 79.2 87 80 88s2.4 2.8 2.4 5.7-1.6 4.9-2.4 5.7-80 88-80 88c-1.5 1.5-3.6 2.3-5.7 2.3s-4.1-.8-5.7-2.3z"
                      fill="currentColor"
                    />
                  </svg>
                </span>
              </Button>
            </div>
          </a>
        )
      }
    </div>
  </div>
</div>
